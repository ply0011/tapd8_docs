# Tapdata 更新

## 版本 1.4.0

### 新增功能

- 数据发布
    - 增加了对嵌套字段的支持
- 数据同步
    - 创建连接时，加入了源端的表过滤功能
    - 增加了对Windows共享文件夹的支持
    - 增加了对Oracle 10g CDC的支持
    - 增加了对复杂Excel的处理能力
    - 新增了connection时对agent的检查
- 管理端
    - 定时任务监控管理
- 其他
    - 全平台统一类型

### 修复错误

- 数据发布
    - 修复API发布日期的时区问题
- 数据同步
    - 重做了Oracle同步CDC解析部分，修复了查找rowid机制所造成的问题
    - 修复GridFS CSV到MongoDB的mapping界面不显示字段的问题
- 管理端
    - 修复MongoDB密码安全显示漏洞
    - 废除视图的使用，显著提高了性能
    - 修复列表和图形展示界面功能不一致的问题
    - 修复新建连接需要两次返回的问题
    - 修复血缘关系中孤立表及连线错误的问题
    - 错误提示优化


## 版本 1.2.0

### 依赖

无

### 弃用

无

### 新增功能

- 数据发布
    - 支持多核并发
    - API 浏览
        - 增加查询时间
    - API 发布
        - 支持模糊搜索 API
        - 支持对自定义接口的可选、必须参数
        - 支持默认最小返回行数和最大返回行数
    - API 服务器
        - 支持分布式部署
        - 支持自定义 API 服务器
- 数据采集
    - 支持跨库查询
    - 内置时间转换函数
    - 内置UUID函数
- UI
    - 菜单栏分类
- 其他
    - 支持 OAuth 认证
    - 新增权限管理

### 修复错误

- 数据发布
    - 新建API，基础路径提示不能超过30个，实际输入无限制
    - 表名带“-”，修改后保存成功。再打开时，还是“-”，并且不能编辑

        补充：对基础路径修改后，未生效

    - 数据浏览，有权限，会出现：EndPoint Get /api/v1/xxxx not found
    - 注册用户无法登陆


- 数据采集
    - 分布式 agent 部署，导致任务详情页的各统计数字显示不正确
    - 编辑任务页面，二次编辑页面，“target path” 属性不回显，导致任务出错
- 数据源
    - 连接类型为源端和目标端，列表中的“连接类型”列显示为空


## 版本 1.1.0

### 依赖

无

### 弃用

无

### 新增功能

- API Server
- 元数据编目
- 数据质量校验

### 修复错误

## 版本 1.0.1

### 依赖

无

### 弃用

无

### 新增功能

无

### 修复错误

1. 在初始同步分片群集之前需要手动操作

    这适用于 MongoDB - MongoDB 复制。

    为了提高初始同步速度，Tapdata 直接连接到每个分片以执行初始同步。这可能导致孤立的文档被复制到目标集群。要防止复制孤立文档，可以在开始复制作业之前执行以下任务：

    - 停止平衡器。请参阅 [https://docs.mongodb.com/manual/reference/method/sh.stopBalancer/](https://docs.mongodb.com/manual/reference/method/sh.stopBalancer/)
    - 清理孤立的文档。请参阅 [https://docs.mongodb.com/manual/reference/command/cleanupOrphaned/](https://docs.mongodb.com/manual/reference/command/cleanupOrphaned/)

2. 不使用自定义 SQL 时，无法在中断时恢复初始同步

    虽然 Tapdata 通常可以在作业停止或中断后恢复复制，但如果未使用自定义 SQL，则无法恢复初始同步。如果由于某种原因在初始同步阶段停止了作业，则在重新启动时，Tapdata 将从开始读取源数据库中的数据。

3. 不使用自定义 SQL 时，无法恢复初始同步

    将复制作业从关系数据库运行到 MongoDB 时，如果作业在初始加载期间中断，则 Tapdata 将在作业重新启动时从头开始。

    例外情况是，如果您使用自定义 SQL 从关系数据库加载数据。在这种情况下，作业可能能够从被中断的点恢复。

4. 在源数据库上执行 DDL 操作之前暂停作业。

    CDC 复制期间尚不支持 Oracle / MySQL / SQLServer DDL 操作。在运行 DDL 操作（例如 drop table，alter table 等）之前，请务必先停止复制作业。您可以在DDL操作完成后恢复作业。

5. DEV-1013：当存在没有主键的表时，复制进度可能无法正常工作

    没有主键的表不会在数据库克隆模式下复制。发生这种情况时，复制进度可能一直显示源和目标之间的存在延迟。